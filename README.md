<div dir="rtl">

## 1. پیاده‌سازی مدل‌ها

ابتدا مدل‌های داخل داک به‌صورت کامل پیاده‌سازی شده‌اند. طراحی جداول با دقت از روی مدل‌ها انجام شده و در ابتدا ارتباطات بین جداول طبق برداشت از داک تنظیم و پیاده‌سازی شده است.  

### به عنوان نمونه:  

### جدول users:

ستون **username** شناسه یکتای کاربر است که به عنوان نام کاربری استفاده می‌شود.  
ستون **password** رمز عبور کاربر را نگهداری می‌کند.  
ستون **role** نقش کاربر را مشخص می‌کند.  
ستون **name** نام کامل کاربر را مشخص می‌کند.  
ستون **email** ایمیل کاربر را نگهداری می‌کند.  
ستون **phone_number** شماره تلفن کاربر را نگهداری می‌کند.  
ستون **city** شهر محل سکونت کاربر را مشخص می‌کند.  
ستون **date_of_sign_in** تاریخ ثبت‌نام کاربر را نگهداری می‌کند.  
ستون **profile_picture** عکس پروفایل کاربر را به صورت داده باینری نگهداری می‌کند.  
ستون **authentication_method** روش ورود کاربر به سامانه را مشخص می‌کند.  

---

### جدول tickets:

ستون **ticket_id** شناسه یکتای بلیط است که به‌صورت خودکار افزایش پیدا می‌کند.  
ستون **vehicle_id** شماره وسیله نقلیه‌ای است که این بلیط به آن مربوط می‌شود.  
ستون **origin** مبدا حرکت وسیله نقلیه را مشخص می‌کند.  
ستون **destination** مقصد حرکت وسیله نقلیه را مشخص می‌کند.  
ستون **date_and_time_of_departure** تاریخ و زمان حرکت وسیله نقلیه را نگهداری می‌کند.  
ستون **date_and_time_of_arrival** تاریخ و زمان رسیدن وسیله نقلیه به مقصد را نگهداری می‌کند.  
ستون **price** قیمت بلیط را مشخص می‌کند و باید بیشتر از صفر باشد.  
ستون **remaining_capacity** تعداد ظرفیت باقی‌مانده برای فروش بلیط را مشخص می‌کند و نمی‌تواند عدد منفی باشد.  

---

### نکته:  
- فعلاً کلیدهای خارجی مشخص نشده‌اند. این موضوع در مرحله طراحی روابط بررسی و پیاده‌سازی خواهد شد.  

---

## 2. پیاده‌سازی ارتباطات بین جداول

برای ارتباطات بین جداول، طبق داک و نیازهای پروژه، به صورت زیر عمل شده است:  
- جداول به‌طور مناسب به یکدیگر مرتبط شده‌اند.  
- چون روابط ما از نوع n به m نیستند، جدول جدیدی برای ارتباطات طراحی نشده است و صرفاً روابط با کلید خارجی برقرار شده‌اند.  

### به عنوان نمونه:  

### کلیدهای خارجی جدول payments:

ستون **username** به جدول users اشاره دارد و مشخص می‌کند که این پرداخت مربوط به کدام کاربر است.  
ستون **reservation_id** به جدول reservations اشاره دارد و نشان می‌دهد که پرداخت مربوط به کدام رزرو است.  

---

### کلیدهای خارجی جدول reports:

ستون **username** به جدول users اشاره دارد و مشخص می‌کند که این گزارش توسط کدام کاربر ثبت شده است.  
ستون **reservation_id** به جدول reservations اشاره دارد و مشخص می‌کند که این گزارش مربوط به کدام رزرو است.  

---

### نکته:  
- فعلاً جداولی که برای مقادیر مشخص طراحی شده‌اند، در این بخش آورده نشده‌اند.  
- در رابطه بین users و reservations، ما سه حالت **خرید، لغو، و تغییر** داریم. با این حال، در جدول reservations فقط یک ستون به نام **username** وجود دارد که آخرین کاربری که بلیط را خریداری کرده نگهداری می‌شود.  
- در صورتی که کاربر بلیط را لغو کند، مقدار **username** به **NULL** تغییر پیدا می‌کند و **status** مناسب برای لغو ست می‌شود.  
- همچنین تغییر بلیط، به صورت **لغو بلیط قبلی و خرید بلیط جدید** در نظر گرفته می‌شود.  

---

## 3. تاریخچه خرید و فروش بلیط‌ها

برای تکمیل طراحی، جدولی برای نگهداری **تاریخچه خرید و فروش بلیط‌ها** ایجاد شده است. این جدول تاریخچه کلیه عملیات **خرید، لغو، و تغییر رزرو بلیط‌ها** را ثبت می‌کند و امکان پیگیری دقیق سوابق را فراهم می‌آورد.  
به دلیل روش پیاده‌سازی روابط بین کاربر و رزرو که در بخش قبل توضیح داده شد، برای نگهداری تاریخچه تمامی عملیات‌ها، نیاز به این جدول جداگانه وجود دارد.  
کلید اصلی این جدول ترکیبی از **username**، **reservation_id**، و **date_and_time** است.  
همچنین تغییر یک بلیط، به صورت **لغو بلیط قبلی و خرید بلیط جدید در یک لحظه** در این جدول ثبت می‌شود.  

---

## 4. جداول با مقادیر مشخص

برای ستون‌هایی که فقط باید **مقادیر مشخص** داشته باشند، جداول جداگانه طراحی شده‌اند و این مقادیر به صورت **دستی** در دیتابیس وارد شده‌اند.  
این کار باعث **محدود کردن انتخاب‌ها** و جلوگیری از **ورود داده اشتباه** می‌شود.  

### به عنوان نمونه:  

### جدول roles:

ستون **role_id** شناسه یکتای نقش است که به‌صورت خودکار افزایش پیدا می‌کند.  
ستون **role** نام نقش را نگهداری می‌کند. این نقش مشخص می‌کند که کاربر چه سطح دسترسی یا وظیفه‌ای در سیستم دارد (مانند کاربر عادی یا مدیر).  

---

### جدول authentication_methods:

ستون **authentication_method_id** شناسه یکتای روش احراز هویت است که به‌صورت خودکار افزایش پیدا می‌کند.  
ستون **authentication_method** روش ورود کاربر به سامانه را نگهداری می‌کند (مانند ایمیل یا شماره تلفن).  

---

## 5. ویژگی‌های اضافه برای وسایل نقلیه

برای ویژگی‌های خاص و اضافی وسایل نقلیه، یک جدول جداگانه طراحی شده است. اطلاعات این جدول به صورت **JSON** ذخیره می‌شود تا نیازی به تعریف ستون جدید برای هر ویژگی وجود نداشته باشد.  
این روش باعث **انعطاف‌پذیری بالا** در افزودن ویژگی‌های جدید برای وسایل نقلیه در آینده می‌شود.  

---

## 6. کدهای پایگاه داده

در نهایت، بر اساس دیاگرام‌های طراحی‌شده، **کدهای SQL** مربوط به ایجاد جداول و ارتباطات آنها نوشته شده‌اند.  
این کدها به‌صورت **دقیق و منطبق با مدل‌ها** و همچنین **بهینه‌شده** پیاده‌سازی شده‌اند.
</div>
